<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
      <script type="text/javascript" src="../../../lib/ext/Ext/adapter/ext/ext-base.js"></script>
      <script type="text/javascript" src="../../../lib/ext/Ext/ext-all.js"></script>
      <script type="text/javascript" src="../../../lib/openlayers/lib/OpenLayers.js"></script>
      <script type="text/javascript" src="../../../lib/geoext/lib/GeoExt.js"></script>
      <script type="text/javascript" src="../../../GeoAdmin.ux/GeoAdmin.js"></script>
      <script type="text/javascript" src="../lib/GeoCatSearchField.js"></script>
      <script type="text/javascript">
        function test_ctor(t) {
            t.plan(2);

            // test
            var c = new GeoAdmin.GeoCatSearchField();
            t.ok(c instanceof GeoAdmin.GeoCatSearchField,
                 "ctor creates an instance of GeoCatSearchField");
            t.eq(c.items.getCount(), 2, "ctor creates two items");
        }

        /*Removed since it doesn't work in IE
        function tquery(t) {
            t.plan(2);

            // set up
            var c = new GeoAdmin.GeoCatSearchField({ url:"foo"});

            // test
            var query = "bar", log = {};
            c.store.proxy.on({beforeload: function(p, params) {
                log.q = params.query;
                return false; // stop the request
            }});

            c.searchGeoCat(query);
            t.eq(log.q, query, "query param is correct");
            t.eq(Ext.WindowMgr.getActive().id, c.searchResultsWindow.id, "Search result window is shown");
        }*/
      </script>
  </head>
  <body>
    <div style="width: 100px; height: 600px" id="map"></div>
  </body>
</html>
