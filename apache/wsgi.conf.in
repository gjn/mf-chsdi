RewriteEngine On

# never cache the api loader
Alias %WSGI_BASE%/loader.js %PROJECT_DIR%/chsdi/public/loader.js
<Location %WSGI_BASE%/loader.js>
    Header set Cache-Control "no-cache"
    Header unset ETag
    Header unset Last-Modified
</Location>

# non cached urls:
RewriteRule ^%WSGI_BASE%/(build|lib|GeoAdmin.ux|tests|doc)/(.*)$  %PROJECT_DIR%/chsdi/public/$1/$2

# cached urls:
RewriteRule ^%WSGI_BASE%/[0-9a-fA-F]*/(build|lib|GeoAdmin.ux)/(.*)$  %PROJECT_DIR%/chsdi/public/$1/$2
<LocationMatch %WSGI_BASE%/[0-9a-fA-F]*/(build|lib|GeoAdmin.ux)>
    ExpiresActive on
    ExpiresDefault "now plus 1 year"
    Header merge Cache-Control "public"

    Header set X-Powered-By http://imgs.xkcd.com/comics/python.png
</LocationMatch>

# web services:
WSGIScriptAlias %WSGI_BASE%/ws %PROJECT_DIR%/chsdi.wsgi
